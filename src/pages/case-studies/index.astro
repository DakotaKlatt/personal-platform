---
import PageLayout from '../../layouts/PageLayout.astro';
import { getCollection } from 'astro:content';

const caseStudies = await getCollection('case-studies');
const sorted = caseStudies.sort(
  (a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime()
);
---

<PageLayout
  title="Case studies â€” Dakota Klatt"
  description="Deep dives: event-driven pipelines, legacy modernization, and reliability work. Architecture, decisions, and lessons learned."
>
  <div class="mx-auto max-w-5xl px-6 py-section">
    <h1 id="main-content" class="font-display font-semibold text-display-xl text-[var(--color-text)] mb-4">
      Case studies
    </h1>
    <p class="text-[var(--color-text-muted)] max-w-2xl mb-block">
      Architecture, tradeoffs, and metrics from real projects. Company-sensitive details kept generic.
    </p>

    <ul class="space-y-6">
      {sorted.map((entry) => (
        <li>
          <a
            href={`/case-studies/${entry.id.replace(/\.(md|mdx)$/, '')}`}
            class="block rounded-xl border border-[var(--color-border)] bg-[var(--color-surface)] p-6 transition-all duration-300 hover:border-accent/40 hover:shadow-lg hover:shadow-accent/5"
          >
            <h2 class="font-display font-semibold text-[var(--color-text)] mb-2">
              {entry.data.title}
            </h2>
            <p class="text-sm text-[var(--color-text-muted)] mb-3">
              {entry.data.description}
            </p>
            <time
              datetime={entry.data.pubDate.toISOString()}
              class="text-xs text-[var(--color-text-muted)]"
            >
              {entry.data.pubDate.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
              })}
            </time>
          </a>
        </li>
      ))}
    </ul>
  </div>
</PageLayout>
