---
import PageLayout from '../layouts/PageLayout.astro';
import QuickView from '../components/QuickView.astro';
import ProjectCard from '../components/ProjectCard.astro';
import Button from '../components/Button.astro';
import { getRealProjects, getIdeaProjects } from '../data/projects';
const realProjects = getRealProjects();
const ideaProjects = getIdeaProjects();
---

<PageLayout
  title="Dakota Klatt — Backend / Platform Engineer"
  description="Backend / Platform Engineer who ships reliable, event-driven systems at scale. Kafka, microservices, Azure, performance & reliability. Green Bay, WI."
>
  {/* Hero */}
  <section
    class="relative overflow-hidden border-b border-[var(--color-border)]"
    aria-label="Introduction"
  >
    <div class="absolute inset-0 bg-[radial-gradient(ellipse_80%_60%_at_50%_-20%,var(--color-accent)/12%,transparent)] pointer-events-none" />
    <div class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg viewBox=%220 0 256 256%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noise%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.9%22 numOctaves=%224%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noise)%22 opacity=%220.03%22/%3E%3C/svg%3E')] pointer-events-none" />
    <div class="relative mx-auto max-w-5xl px-6 py-section">
      <h1 class="font-display font-semibold text-display-xl text-[var(--color-text)] mb-4 animate-fade-in-up">
        Dakota Klatt
      </h1>
      <p class="text-xl md:text-2xl text-[var(--color-text-muted)] max-w-2xl mb-8 animate-fade-in-up" style="animation-delay: 0.1s; animation-fill-mode: both;">
        Backend / Platform Engineer who ships reliable, event-driven systems at scale.
      </p>
      <div class="flex flex-wrap gap-4 animate-fade-in-up" style="animation-delay: 0.2s; animation-fill-mode: both;">
        <Button href="/projects" variant="primary">View projects</Button>
        <Button href="/contact" variant="secondary">Contact</Button>
      </div>
    </div>
  </section>

  <QuickView />

  {/* Projects */}
  <section class="py-section" aria-labelledby="featured-heading">
    <div class="mx-auto max-w-5xl px-6">
      <h2 id="featured-heading" class="font-display font-semibold text-display-lg text-[var(--color-text)] mb-block">
        Projects
      </h2>
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {realProjects.map((project, i) => (
          <ProjectCard
            project={project}
            showHighlights={false}
            animationDelay={50 * i}
          />
        ))}
      </div>
      <div id="home-idea-projects" class="hidden mt-8">
        <h3 class="font-display font-semibold text-[var(--color-text)] mb-4">Potential future project ideas</h3>
        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {ideaProjects.map((project, i) => (
            <ProjectCard project={project} showHighlights={false} />
          ))}
        </div>
      </div>
      <div class="mt-6 text-center">
        <button type="button" id="home-toggle-ideas" class="text-sm font-medium text-accent hover:underline">
          Show potential future project ideas
        </button>
      </div>
      <div class="mt-6 text-center">
        <Button href="/projects" variant="ghost">All projects →</Button>
      </div>
    </div>
  </section>

  {/* Signature experience */}
  <section class="py-section border-t border-[var(--color-border)] bg-[var(--color-surface-elevated)]/30" aria-labelledby="experience-heading">
    <div class="mx-auto max-w-5xl px-6">
      <h2 id="experience-heading" class="font-display font-semibold text-display-lg text-[var(--color-text)] mb-block">
        Signature experience
      </h2>
      <div class="rounded-xl border border-[var(--color-border)] bg-[var(--color-surface)] p-6 md:p-8">
        <p class="font-display font-semibold text-[var(--color-text)] mb-2">Technical lead · Logistics / freight platform</p>
        <p class="text-sm text-[var(--color-text-muted)] mb-4">Led modernization from five legacy systems to a unified microservices platform. Owned design and ops for 30+ microservices; authored 15+; contributed across 200+.</p>
        <ul class="grid gap-2 sm:grid-cols-2 text-sm text-[var(--color-text-muted)]">
          <li><span class="text-accent font-medium">100K+</span> tx/hr at peak (shipment tracking pipeline)</li>
          <li><span class="text-accent font-medium">30–50K</span> tx/hr typical sustained</li>
          <li>Kafka, Java/Spring Boot, Azure, Redis, MongoDB</li>
          <li>Dynatrace, Snyk, ShiftLeft, Azure DevOps</li>
        </ul>
      </div>
    </div>
  </section>

  {/* Personal */}
  <section class="py-section border-t border-[var(--color-border)]" aria-labelledby="personal-heading">
    <div class="mx-auto max-w-5xl px-6">
      <h2 id="personal-heading" class="font-display font-semibold text-display-lg text-[var(--color-text)] mb-block">
        Personal
      </h2>
      <p class="text-[var(--color-text-muted)] max-w-2xl mb-4">
        When I’m not deep in Kafka pipelines or chasing down a reliability issue, I’m usually doing something hands-on. Winter is for skiing and snowboarding; the rest of the year I’m mountain biking. I also tinker with drones and radio-controlled vehicles, and small home DIY projects—anything that lets me build, test, tweak, and see real progress.
      </p>
      <Button href="/personal" variant="ghost">More about me →</Button>
    </div>
  </section>

  <script>
    document.getElementById('home-toggle-ideas')?.addEventListener('click', function () {
      const block = document.getElementById('home-idea-projects');
      const btn = document.getElementById('home-toggle-ideas');
      if (!block || !btn) return;
      const isHidden = block.classList.contains('hidden');
      block.classList.toggle('hidden', !isHidden);
      btn.textContent = isHidden ? 'Hide potential future project ideas' : 'Show potential future project ideas';
    });
  </script>

  {/* Now */}
  <section class="py-section" aria-labelledby="now-heading">
    <div class="mx-auto max-w-5xl px-6">
      <h2 id="now-heading" class="font-display font-semibold text-display-lg text-[var(--color-text)] mb-block">
        Now
      </h2>
      <p class="text-[var(--color-text-muted)] max-w-2xl">
        Building and operating event-driven services in the logistics space. Investing in observability, security in CI/CD, and AI-assisted workflows (Copilot, agent-based tooling) to ship faster without sacrificing reliability. Always tuning.
      </p>
    </div>
  </section>
</PageLayout>
